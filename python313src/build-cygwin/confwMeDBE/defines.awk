BEGIN {
D["_GNU_SOURCE"]=" 1"
D["_NETBSD_SOURCE"]=" 1"
D["__BSD_VISIBLE"]=" 1"
D["_BSD_TYPES"]=" 1"
D["_DARWIN_C_SOURCE"]=" 1"
D["_XOPEN_SOURCE"]=" 600"
D["_XOPEN_SOURCE_EXTENDED"]=" 1"
D["_POSIX_C_SOURCE"]=" 200112L"
D["STDC_HEADERS"]=" 1"
D["HAVE_SYS_TYPES_H"]=" 1"
D["HAVE_SYS_STAT_H"]=" 1"
D["HAVE_STDLIB_H"]=" 1"
D["HAVE_STRING_H"]=" 1"
D["HAVE_MEMORY_H"]=" 1"
D["HAVE_STRINGS_H"]=" 1"
D["HAVE_INTTYPES_H"]=" 1"
D["HAVE_STDINT_H"]=" 1"
D["HAVE_UNISTD_H"]=" 1"
D["__EXTENSIONS__"]=" 1"
D["_ALL_SOURCE"]=" 1"
D["_GNU_SOURCE"]=" 1"
D["_POSIX_PTHREAD_SEMANTICS"]=" 1"
D["_TANDEM_SOURCE"]=" 1"
D["Py_ENABLE_SHARED"]=" 1"
D["STDC_HEADERS"]=" 1"
D["HAVE_ASM_TYPES_H"]=" 1"
D["HAVE_DLFCN_H"]=" 1"
D["HAVE_ERRNO_H"]=" 1"
D["HAVE_FCNTL_H"]=" 1"
D["HAVE_IEEEFP_H"]=" 1"
D["HAVE_LANGINFO_H"]=" 1"
D["HAVE_LIBINTL_H"]=" 1"
D["HAVE_PROCESS_H"]=" 1"
D["HAVE_PTHREAD_H"]=" 1"
D["HAVE_SIGNAL_H"]=" 1"
D["HAVE_STDINT_H"]=" 1"
D["HAVE_TERMIOS_H"]=" 1"
D["HAVE_UNISTD_H"]=" 1"
D["HAVE_UTIME_H"]=" 1"
D["HAVE_SYS_PARAM_H"]=" 1"
D["HAVE_SYS_POLL_H"]=" 1"
D["HAVE_SYS_SELECT_H"]=" 1"
D["HAVE_SYS_SOCKET_H"]=" 1"
D["HAVE_SYS_STATVFS_H"]=" 1"
D["HAVE_SYS_TERMIO_H"]=" 1"
D["HAVE_SYS_TIMES_H"]=" 1"
D["HAVE_SYS_TYPES_H"]=" 1"
D["HAVE_SYS_UTSNAME_H"]=" 1"
D["HAVE_SYS_WAIT_H"]=" 1"
D["HAVE_PTY_H"]=" 1"
D["HAVE_SYS_RESOURCE_H"]=" 1"
D["HAVE_SYSEXITS_H"]=" 1"
D["HAVE_MAKEDEV"]=" 1"
D["_LARGEFILE_SOURCE"]=" 1"
D["_FILE_OFFSET_BITS"]=" 64"
D["RETSIGTYPE"]=" void"
D["HAVE_SSIZE_T"]=" 1"
D["SIZEOF_INT"]=" 4"
D["SIZEOF_LONG"]=" 4"
D["SIZEOF_VOID_P"]=" 4"
D["SIZEOF_SHORT"]=" 2"
D["SIZEOF_FLOAT"]=" 4"
D["SIZEOF_DOUBLE"]=" 8"
D["SIZEOF_FPOS_T"]=" 8"
D["SIZEOF_SIZE_T"]=" 4"
D["SIZEOF_PID_T"]=" 4"
D["HAVE_LONG_LONG"]=" 1"
D["SIZEOF_LONG_LONG"]=" 8"
D["HAVE_LONG_DOUBLE"]=" 1"
D["SIZEOF_LONG_DOUBLE"]=" 12"
D["HAVE_C99_BOOL"]=" 1"
D["SIZEOF__BOOL"]=" 1"
D["HAVE_UINTPTR_T"]=" 1"
D["SIZEOF_UINTPTR_T"]=" 4"
D["SIZEOF_OFF_T"]=" 8"
D["HAVE_LARGEFILE_SUPPORT"]=" 1"
D["SIZEOF_TIME_T"]=" 4"
D["SIZEOF_PTHREAD_T"]=" 4"
D["SHLIB_EXT"]=" \".dll\""
D["HAVE_LIBDL"]=" 1"
D["WITH_LIBINTL"]=" 1"
D["WITH_THREAD"]=" 1"
D["_REENTRANT"]=" 1"
D["HAVE_PTHREAD_SIGMASK"]=" 1"
D["HAVE_BROKEN_PTHREAD_SIGMASK"]=" 1"
D["WITH_DOC_STRINGS"]=" 1"
D["WITH_PYMALLOC"]=" 1"
D["HAVE_DLOPEN"]=" 1"
D["HAVE_DYNAMIC_LOADING"]=" 1"
D["HAVE_SETITIMER"]=" 1"
D["HAVE_GETITIMER"]=" 1"
D["HAVE_BIND_TEXTDOMAIN_CODESET"]=" 1"
D["HAVE_CHOWN"]=" 1"
D["HAVE_CLOCK"]=" 1"
D["HAVE_CONFSTR"]=" 1"
D["HAVE_FCHMOD"]=" 1"
D["HAVE_FCHOWN"]=" 1"
D["HAVE_FORK"]=" 1"
D["HAVE_FTIME"]=" 1"
D["HAVE_FTRUNCATE"]=" 1"
D["HAVE_GAI_STRERROR"]=" 1"
D["HAVE_GETGROUPS"]=" 1"
D["HAVE_GETLOGIN"]=" 1"
D["HAVE_GETPEERNAME"]=" 1"
D["HAVE_GETPGID"]=" 1"
D["HAVE_GETPRIORITY"]=" 1"
D["HAVE_GETPWENT"]=" 1"
D["HAVE_GETSID"]=" 1"
D["HAVE_KILL"]=" 1"
D["HAVE_LCHOWN"]=" 1"
D["HAVE_LSTAT"]=" 1"
D["HAVE_MBRTOWC"]=" 1"
D["HAVE_MKFIFO"]=" 1"
D["HAVE_MKNOD"]=" 1"
D["HAVE_MKTIME"]=" 1"
D["HAVE_NICE"]=" 1"
D["HAVE_PAUSE"]=" 1"
D["HAVE_POLL"]=" 1"
D["HAVE_PUTENV"]=" 1"
D["HAVE_READLINK"]=" 1"
D["HAVE_REALPATH"]=" 1"
D["HAVE_SEM_OPEN"]=" 1"
D["HAVE_SEM_TIMEDWAIT"]=" 1"
D["HAVE_SEM_GETVALUE"]=" 1"
D["HAVE_SEM_UNLINK"]=" 1"
D["HAVE_SETEGID"]=" 1"
D["HAVE_SETEUID"]=" 1"
D["HAVE_SETGID"]=" 1"
D["HAVE_SETREGID"]=" 1"
D["HAVE_SETREUID"]=" 1"
D["HAVE_SETPGID"]=" 1"
D["HAVE_SETPGRP"]=" 1"
D["HAVE_SETUID"]=" 1"
D["HAVE_SETVBUF"]=" 1"
D["HAVE_SIGINTERRUPT"]=" 1"
D["HAVE_SIGRELSE"]=" 1"
D["HAVE_STRFTIME"]=" 1"
D["HAVE_STRLCPY"]=" 1"
D["HAVE_SYSCONF"]=" 1"
D["HAVE_TCGETPGRP"]=" 1"
D["HAVE_TEMPNAM"]=" 1"
D["HAVE_TIMES"]=" 1"
D["HAVE_TRUNCATE"]=" 1"
D["HAVE_UNAME"]=" 1"
D["HAVE_UNSETENV"]=" 1"
D["HAVE_WAITPID"]=" 1"
D["HAVE_WAIT3"]=" 1"
D["HAVE_WCSCOLL"]=" 1"
D["HAVE_WCSFTIME"]=" 1"
D["HAVE_WCSXFRM"]=" 1"
D["HAVE_CHROOT"]=" 1"
D["HAVE_LINK"]=" 1"
D["HAVE_SYMLINK"]=" 1"
D["HAVE_FCHDIR"]=" 1"
D["HAVE_FSYNC"]=" 1"
D["HAVE_FDATASYNC"]=" 1"
D["HAVE_FLOCK"]=" 1"
D["HAVE_GETPAGESIZE"]=" 1"
D["HAVE_ZLIB_COPY"]=" 1"
D["HAVE_HSTRERROR"]=" 1"
D["HAVE_INET_ATON"]=" 1"
D["HAVE_INET_PTON"]=" 1"
D["HAVE_SETGROUPS"]=" 1"
D["HAVE_OPENPTY"]=" 1"
D["HAVE_FORKPTY"]=" 1"
D["HAVE_MEMMOVE"]=" 1"
D["HAVE_FSEEKO"]=" 1"
D["HAVE_STATVFS"]=" 1"
D["HAVE_STRDUP"]=" 1"
D["HAVE_GETPGRP"]=" 1"
D["HAVE_SETPGRP"]=" 1"
D["HAVE_GETTIMEOFDAY"]=" 1"
D["HAVE_DEVICE_MACROS"]=" 1"
D["HAVE_GETADDRINFO"]=" 1"
D["HAVE_GETNAMEINFO"]=" 1"
D["TIME_WITH_SYS_TIME"]=" 1"
D["HAVE_DECL_TZNAME"]=" 1"
D["HAVE_TZNAME"]=" 1"
D["HAVE_STRUCT_STAT_ST_RDEV"]=" 1"
D["HAVE_STRUCT_STAT_ST_BLKSIZE"]=" 1"
D["HAVE_STRUCT_STAT_ST_BIRTHTIME"]=" 1"
D["HAVE_STRUCT_STAT_ST_BLOCKS"]=" 1"
D["HAVE_ST_BLOCKS"]=" 1"
D["SYS_SELECT_WITH_SYS_TIME"]=" 1"
D["HAVE_ADDRINFO"]=" 1"
D["HAVE_SOCKADDR_STORAGE"]=" 1"
D["HAVE_PROTOTYPES"]=" 1"
D["HAVE_STDARG_PROTOTYPES"]=" 1"
D["HAVE_SOCKETPAIR"]=" 1"
D["HAVE_GETHOSTBYNAME"]=" 1"
D["DOUBLE_IS_LITTLE_ENDIAN_IEEE754"]=" 1"
D["HAVE_GCC_ASM_FOR_X87"]=" 1"
D["X87_DOUBLE_ROUNDING"]=" 1"
D["TANH_PRESERVES_ZERO_SIGN"]=" 1"
D["HAVE_ASINH"]=" 1"
D["HAVE_ATANH"]=" 1"
D["HAVE_COPYSIGN"]=" 1"
D["HAVE_EXPM1"]=" 1"
D["HAVE_FINITE"]=" 1"
D["HAVE_HYPOT"]=" 1"
D["HAVE_LOG1P"]=" 1"
D["HAVE_ROUND"]=" 1"
D["HAVE_DECL_ISINF"]=" 1"
D["HAVE_DECL_ISNAN"]=" 1"
D["HAVE_DECL_ISFINITE"]=" 1"
D["HAVE_WCHAR_H"]=" 1"
D["SIZEOF_WCHAR_T"]=" 2"
D["Py_UNICODE_SIZE"]=" 2"
D["HAVE_USABLE_WCHAR_T"]=" 1"
D["PY_UNICODE_TYPE"]=" wchar_t"
D["HAVE_GETC_UNLOCKED"]=" 1"
D["HAVE_BROKEN_NICE"]=" 1"
D["HAVE_DECL_TZNAME"]=" 1"
D["HAVE_TZNAME"]=" 1"
D["HAVE_WORKING_TZSET"]=" 1"
D["HAVE_STAT_TV_NSEC"]=" 1"
D["HAVE_DEV_PTMX"]=" 1"
D["PY_FORMAT_SIZE_T"]=" \"z\""
  for (key in D) D_is_set[key] = 1
  FS = ""
}
/^[\t ]*#[\t ]*(define|undef)[\t ]+[_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ][_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789]*([\t (]|$)/ {
  line = $ 0
  split(line, arg, " ")
  if (arg[1] == "#") {
    defundef = arg[2]
    mac1 = arg[3]
  } else {
    defundef = substr(arg[1], 2)
    mac1 = arg[2]
  }
  split(mac1, mac2, "(") #)
  macro = mac2[1]
  prefix = substr(line, 1, index(line, defundef) - 1)
  if (D_is_set[macro]) {
    # Preserve the white space surrounding the "#".
    print prefix "define", macro P[macro] D[macro]
    next
  } else {
    # Replace #undef with comments.  This is necessary, for example,
    # in the case of _POSIX_SOURCE, which is predefined and required
    # on some systems where configure will not decide to define it.
    if (defundef == "undef") {
      print "/*", prefix defundef, macro, "*/"
      next
    }
  }
}
{ print }
